.TH "process_frames" 3 "Tue Jan 6 2026" "CANopen-Analyzer" \" -*- nroff -*-
.ad l
.nh
.SH NAME
process_frames
.SH SYNOPSIS
.br
.PP
.PP
Inherits Thread\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "def \fB__init__\fP (self, \fBbus_stats\fP \fBstats\fP, queue\&.Queue \fBraw_frame\fP, queue\&.Queue \fBprocessed_frame\fP, \fBeds_parser\fP \fBeds_map\fP, str|None \fBexport\fP=None)"
.br
.RI "Initialize the processor thread\&. "
.ti -1c
.RI "def \fBdecode_by_datatype\fP (self, bytes raw, dict|None entry)"
.br
.RI "Decode raw frame to respective CANopen DataType\&. "
.ti -1c
.RI "def \fBexport_processed_frame\fP (self, dict frame)"
.br
.RI "Save a processed frame row to the processed CSV file\&. "
.ti -1c
.RI "def \fBrun\fP (self)"
.br
.RI "Main processing loop\&. "
.ti -1c
.RI "def \fBsave_processed_frame\fP (self, dict frame)"
.br
.RI "Save a fully processed CANopen frame in memory and export it to CSV\&. "
.ti -1c
.RI "def \fBstop\fP (self)"
.br
.RI "Request the processor thread to stop\&. "
.in -1c
.SS "Public Attributes"

.in +1c
.ti -1c
.RI "\fBeds_map\fP"
.br
.RI "EDS map/parser used to resolve (index, subindex) -> name strings\&. "
.ti -1c
.RI "\fBexport\fP"
.br
.RI "Flag indicating whether processed export is enabled : None | csv | json\&. "
.ti -1c
.RI "\fBexport_file\fP"
.br
.RI "File object for processed export (or None)\&. "
.ti -1c
.RI "\fBexport_filename\fP"
.br
.RI "Output filename for processed export file or None\&. "
.ti -1c
.RI "\fBexport_serial_number\fP"
.br
.RI "Serial number for exported rows (increments each write)\&. "
.ti -1c
.RI "\fBexport_writer\fP"
.br
.RI "Writer instance for processed rows (or None)\&. "
.ti -1c
.RI "\fBlog\fP"
.br
.RI "Logger instance scoped to this processor\&. "
.ti -1c
.RI "\fBprocessed_frame\fP"
.br
.RI "Queue from which raw frame dictionaries are consumed\&. "
.ti -1c
.RI "\fBraw_frame\fP"
.br
.RI "Queue from which raw frame dictionaries are consumed\&. "
.ti -1c
.RI "\fBstats\fP"
.br
.RI "Reference to the \fBbus_stats\fP instance used for recording metrics\&. "
.in -1c
.SS "Private Member Functions"

.in +1c
.ti -1c
.RI "dict \fB_json_safe_processed_frame\fP (self, dict frame)"
.br
.ti -1c
.RI "def \fB_resolve_od_entry\fP (self, int index, int sub)"
.br
.RI "Resolve Object Dictionary metadata for (index, sub)\&. "
.ti -1c
.RI "bool \fB_sdo_has_index\fP (self, int cs)"
.br
.RI "Return True if SDO command specifier carries index/subindex\&. "
.in -1c
.SS "Private Attributes"

.in +1c
.ti -1c
.RI "\fB_json_first\fP"
.br
.ti -1c
.RI "\fB_sdo_segments\fP"
.br
.ti -1c
.RI "\fB_stop_event\fP"
.br
.RI "Internal event used to signal the run loop to stop\&. "
.in -1c
.SH "Constructor & Destructor Documentation"
.PP 
.SS "def __init__ ( self, \fBbus_stats\fP stats, queue\&.Queue raw_frame, queue\&.Queue processed_frame, \fBeds_parser\fP eds_map, str | None  export = \fCNone\fP)"

.PP
Initialize the processor thread\&. The constructor stores references to required helpers, initializes a stop event and logging, sets up CSV export if requested, and ensures statistics collection start time is set\&. 
.PP
\fBParameters\fP
.RS 4
\fIstats\fP Instance of \fBbus_stats\fP used to record statistics\&. 
.br
\fIraw_frame\fP \fCqueue\&.Queue\fP providing raw frames (dict) from the sniffer\&. 
.br
\fIprocessed_frame\fP \fCqueue\&.Queue\fP instance to push processed frames for display\&. 
.br
\fIeds_map\fP Instance of \fBeds_parser\fP from \fBeds_parser\&.py\fP used to resolve Object Dictionary names and PDO mappings\&. 
.br
\fIexport\fP \fCcsv\fP, \fCjson\fP: enable export of processed frames to a file\&. 
.RE
.PP

.SH "Member Function Documentation"
.PP 
.SS " dict _json_safe_processed_frame ( self, dict frame)\fC [private]\fP"

.SS "def _resolve_od_entry ( self, int index, int sub)\fC [private]\fP"

.PP
Resolve Object Dictionary metadata for (index, sub)\&. 
.SS " bool _sdo_has_index ( self, int cs)\fC [private]\fP"

.PP
Return True if SDO command specifier carries index/subindex\&. 
.SS "def decode_by_datatype ( self, bytes raw, dict | None entry)"

.PP
Decode raw frame to respective CANopen DataType\&. 
.SS "def export_processed_frame ( self, dict frame)"

.PP
Save a processed frame row to the processed CSV file\&. Writes processed frame to export file\&. Periodically flushes and \fCfsyncs\fP the file according to \fCdefs\&.FSYNC_EVERY\fP\&. 
.PP
\fBParameters\fP
.RS 4
\fIframe\fP Processed frame\&. 
.RE
.PP

.SS "def run ( self)"

.PP
Main processing loop\&. Non-blocking, interruptable loop that pulls frame dicts from \fCraw_frame\fP, classifies frames, updates \fCself\&.stats\fP, resolves names via \fCself\&.eds_map\fP, decodes simple SDO payloads (expedited/data), exports CSV rows (if enabled), and logs the processed frame details\&. Ensures resources are closed on exit\&. 
.SS "def save_processed_frame ( self, dict frame)"

.PP
Save a fully processed CANopen frame in memory and export it to CSV\&. Converts the raw and decoded payloads into hexadecimal string representations if necessary, then delegates the storage of the processed frame to \fBsave_frame\fP and its CSV export to \fBexport_processed_frame\fP\&. This function ensures consistent formatting for both in-memory data and CSV output\&. 
.PP
\fBParameters\fP
.RS 4
\fIframe\fP Frame to be saved\&. 
.RE
.PP

.SS "def stop ( self)"

.PP
Request the processor thread to stop\&. Signals the internal stop event so the processing loop exits at the next opportunity\&. This method does not block waiting for thread exit; call \fCjoin()\fP on the thread object if synchronous shutdown is required\&. 
.SH "Member Data Documentation"
.PP 
.SS "_json_first\fC [private]\fP"

.SS "_sdo_segments\fC [private]\fP"

.SS "_stop_event\fC [private]\fP"

.PP
Internal event used to signal the run loop to stop\&. 
.SS "eds_map"

.PP
EDS map/parser used to resolve (index, subindex) -> name strings\&. 
.SS "export"

.PP
Flag indicating whether processed export is enabled : None | csv | json\&. 
.SS "export_file"

.PP
File object for processed export (or None)\&. 
.SS "export_filename"

.PP
Output filename for processed export file or None\&. 
.SS "export_serial_number"

.PP
Serial number for exported rows (increments each write)\&. 
.SS "export_writer"

.PP
Writer instance for processed rows (or None)\&. 
.SS "log"

.PP
Logger instance scoped to this processor\&. 
.SS "processed_frame"

.PP
Queue from which raw frame dictionaries are consumed\&. 
.SS "raw_frame"

.PP
Queue from which raw frame dictionaries are consumed\&. 
.SS "stats"

.PP
Reference to the \fBbus_stats\fP instance used for recording metrics\&. 

.SH "Author"
.PP 
Generated automatically by Doxygen for CANopen-Analyzer from the source code\&.
