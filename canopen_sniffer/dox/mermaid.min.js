// mermaid.min.js (loader)
// This small loader tries to use a bundled mermaid if available, otherwise loads from CDN.
(function(){
  // If mermaid already exists, do nothing.
  if (window.mermaid) return;
  // Try to load a local copy named "mermaid.full.min.js" in the same directory first.
  function loadScript(src, cb) {
    var s = document.createElement('script');
    s.src = src;
    s.onload = function(){ cb(null); };
    s.onerror = function(){ cb(new Error('Failed to load ' + src)); };
    document.head.appendChild(s);
  }
  // Attempt local fallback then CDN
  loadScript('mermaid.full.min.js', function(err){
    if (!err) return;
    // load from CDN as fallback
    loadScript('https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js', function(err2){
      if (err2) {
        console.error('Failed to load mermaid from CDN', err2);
      } else {
        console.log('Loaded mermaid from CDN');
      }
    });
  });
})();
