# ██╗ ██████╗ ████████╗ █████╗ ██████╗
# ██║██╔═══██╗╚══██╔══╝██╔══██╗╚════██╗
# ██║██║   ██║   ██║   ███████║ █████╔╝
# ██║██║   ██║   ██║   ██╔══██║██╔═══╝
# ██║╚██████╔╝   ██║   ██║  ██║███████╗
# ╚═╝ ╚═════╝    ╚═╝   ╚═╝  ╚═╝╚══════╝
# Copyright (c) 2025 iota2 (iota2 Engineering Tools)
# Licensed under the MIT License. See LICENSE file in the project root for details.

# .pre-commit-config.yaml
repos:
  - repo: local
    hooks:
      - id: check-license-headers
        name: Check license headers (iota2)
        entry: python3 tools/check_license_headers.py
        language: system
        files: '\.(py|sh|yml|yaml|md)$'
        pass_filenames: true
        args: ["--verbose"]

      - id: fix-license-headers
        name: Fix license headers (runs add_license_headers.sh)
        entry: bash tools/add_license_headers.sh
        language: system
        files: '\.(py|sh|yml|yaml|md)$'
        pass_filenames: false
        always_run: false
        # To run manually:
        # pre-commit run fix-license-headers --all-files

      - id: check-changelog
        name: Check CHANGELOG Unreleased section (iota2)
        entry: python3 tools/check_changelog.py
        language: system
        files: '^CHANGELOG\.md$'
        pass_filenames: false
        always_run: false
        args: ["--verbose"]
        # This hook runs when CHANGELOG.md is staged; it will block the commit if the Unreleased section is missing/empty.

      - id: fix-changelog
        name: Fix CHANGELOG Unreleased (populate from git log) (maintainer)
        entry: python3 tools/check_changelog.py --fix
        language: system
        files: '^CHANGELOG\.md$'
        pass_filenames: false
        always_run: false
        # Run manually:
        # pre-commit run fix-changelog --all-files

      - id: generate-doxygen
        name: Generate and Stage Doxygen Documentation
        entry: bash tools/generate_doxygen.sh
        language: system
        pass_filenames: false
        always_run: true
